"""
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞.
–í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.
"""
import os
from dotenv import load_dotenv

load_dotenv()

# =============================================================================
# –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# =============================================================================

# Telegram Bot Token
TELEGRAM_BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
if not TELEGRAM_BOT_TOKEN:
    # –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ token.txt
    try:
        with open('token.txt', 'r') as f:
            TELEGRAM_BOT_TOKEN = f.read().strip()
    except FileNotFoundError:
        raise ValueError(
            "‚ùå TELEGRAM_BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω!\n"
            "–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ: TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω\n"
            "–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª token.txt —Å —Ç–æ–∫–µ–Ω–æ–º"
        )

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_TIMEZONE = os.getenv('DEFAULT_TIMEZONE', 'Etc/GMT-3')

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•
# =============================================================================

DB_NAME = os.getenv('DB_NAME', 'reminders.db')
SCHEDULER_DB_NAME = os.getenv('SCHEDULER_DB_NAME', 'scheduler_jobs.db')

# =============================================================================
# –ù–ê–°–¢–†–û–ô–ö–ò –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø
# =============================================================================

LOG_LEVEL = os.getenv('LOG_LEVEL', 'INFO')
LOG_FILE = os.getenv('LOG_FILE', 'bot_log.txt')
LOG_FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'

# =============================================================================
# –õ–ò–ú–ò–¢–´ –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø
# =============================================================================

MAX_CUSTOM_REMINDERS_PER_USER = int(os.getenv('MAX_CUSTOM_REMINDERS', '10'))
MAX_MESSAGE_LENGTH = int(os.getenv('MAX_MESSAGE_LENGTH', '500'))

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
MISFIRE_GRACE_TIME = int(os.getenv('MISFIRE_GRACE_TIME', '3600'))  # 1 —á–∞—Å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
CLEANUP_INTERVAL_HOURS = int(os.getenv('CLEANUP_INTERVAL_HOURS', '1'))

# =============================================================================
# –°–û–°–¢–û–Ø–ù–ò–Ø CONVERSATION HANDLER
# =============================================================================

# –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –≤–æ–¥–µ
WATER_MESSAGE = 0
WATER_START_TIME = 1
WATER_END_TIME = 2
WATER_INTERVAL = 3

# –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
CUSTOM_MESSAGE = 4
CUSTOM_TIME = 5
CUSTOM_FREQUENCY = 6

# =============================================================================
# –ò–ù–¢–ï–†–í–ê–õ–´ –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô –û –í–û–î–ï (–≤ –º–∏–Ω—É—Ç–∞—Ö)
# =============================================================================

WATER_INTERVALS = {
    '30': 30,
    '60': 60,
    '90': 90,
    '120': 120,
    '150': 150,
    '180': 180,
    '240': 240,
}

# =============================================================================
# –¢–ò–ü–´ –ß–ê–°–¢–û–¢–´ –ö–ê–°–¢–û–ú–ù–´–• –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ô
# =============================================================================

FREQUENCY_TYPES = {
    'once': '–û–¥–∏–Ω —Ä–∞–∑',
    'daily': '–ö–∞–∂–¥—ã–π –¥–µ–Ω—å',
    'weekly': '–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é'
}

# =============================================================================
# –°–û–û–ë–©–ï–ù–ò–Ø –ë–û–¢–ê
# =============================================================================

class Messages:
    """–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–µ–∫—Å—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π."""
    
    WELCOME = (
        "–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç-–Ω–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞.\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:"
    )
    
    ERROR_GENERAL = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
    ERROR_INVALID_TIME = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç {min} –¥–æ {max}."
    ERROR_INVALID_DATE_FORMAT = "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `–î–î.–ú–ú.–ì–ì–ì–ì –ß–ß:–ú–ú`."
    ERROR_DATE_IN_PAST = "–≠—Ç–∞ –¥–∞—Ç–∞ —É–∂–µ –≤ –ø—Ä–æ—à–ª–æ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –±—É–¥—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è."
    ERROR_LIMIT_REACHED = "–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –≤ {limit} –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π."
    
    WATER_STATUS_ACTIVE = (
        "–°—Ç–∞—Ç—É—Å: –í–∫–ª—é—á–µ–Ω—ã ‚úÖ\n"
        "–°–æ–æ–±—â–µ–Ω–∏–µ: ¬´{message}¬ª\n"
        "–ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ {interval} –º–∏–Ω.\n"
        "–ü–µ—Ä–∏–æ–¥: —Å {start}:00 –¥–æ {end}:00"
    )
    
    WATER_STATUS_INACTIVE = "–°—Ç–∞—Ç—É—Å: –í—ã–∫–ª—é—á–µ–Ω—ã ‚ùå"
    
    WATER_SETUP_SUCCESS = (
        "‚úÖ –û—Ç–ª–∏—á–Ω–æ! –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–æ–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã!\n\n"
        "üìÖ –°–ª–µ–¥—É—é—â–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: {next_time}\n"
        "‚è∞ –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ {interval} –º–∏–Ω.\n"
        "üïí –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è: —Å {start}:00 –¥–æ {end}:00"
    )
    
    CUSTOM_REMINDER_SUCCESS = (
        "‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ!\n\n"
        "üìù –°–æ–æ–±—â–µ–Ω–∏–µ: ¬´{message}¬ª\n"
        "üìÖ –í—Ä–µ–º—è: {time}\n"
        "üîÑ –ü–æ–≤—Ç–æ—Ä: {frequency}"
    )
    
    MISSED_REMINDERS_WARNING = (
        "‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ {count} –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –≤–æ–¥–µ!\n\n{message}"
    )
    
    MISSED_CUSTOM_REMINDER = (
        "‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:\n{message}\n\n"
        "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞: {time}"
    )

# =============================================================================
# –†–ï–ñ–ò–ú –†–ê–ó–†–ê–ë–û–¢–ö–ò
# =============================================================================

DEBUG_MODE = os.getenv('DEBUG_MODE', 'false').lower() == 'true'

if DEBUG_MODE:
    LOG_LEVEL = 'DEBUG'

